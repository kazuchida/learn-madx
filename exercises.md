# MAD-X 練習問題

## 練習問題 1: 基本的なFODO格子

### 目標
基本的なFODO格子を作成し、Twissパラメータを計算する

### 要求仕様
- 四極磁石長さ: 0.5 m
- ドリフト長さ: 2.0 m  
- セル長: 6.0 m
- ビーム: 1 GeV プロトン

### 課題
1. 要素とシーケンスを定義してください
2. Twiss計算を実行してください
3. ベータ関数の最大値と最小値を求めてください

### ヒント
```madx
! 要素定義の例
QF: QUADRUPOLE, L=?, K1=?;
```

---

## 練習問題 2: チューニング

### 目標
FODO格子のチューンを特定の値に調整する

### 要求仕様
- 目標チューン: Qx = 0.25, Qy = 0.25
- 四極磁石強度を調整変数として使用

### 課題
1. マッチング機能を使用してチューンを調整してください
2. マッチング前後のチューン値を比較してください

### ヒント
```madx
MATCH;
    VARY, NAME=?, STEP=?;
    GLOBAL, Q1=?, Q2=?;
    LMDIF;
ENDMATCH;
```

---

## 練習問題 3: エラー解析

### 目標
アライメントエラーがビーム軌道に与える影響を調査する

### 要求仕様
- 四極磁石に ±0.1mm のランダムアライメントエラー
- 統計解析のため100回計算

### 課題
1. エラー定義を追加してください
2. 軌道歪みを計算してください
3. RMS軌道歪みを評価してください

---

## 練習問題 4: 粒子追跡

### 目標
粒子の長期的な安定性を調査する

### 要求仕様
- 初期条件: x = 1mm, y = 1mm
- 追跡ターン数: 1000
- 運動量偏差: 0, ±0.1%

### 課題
1. 異なる運動量偏差での追跡を実行してください
2. 粒子軌道をプロットしてください
3. 動的アパーチャを推定してください

---

## 練習問題 5: 高度なマッチング

### 目標
特定の位置でのベータ関数値を制御する

### 要求仕様
- IP位置（中央）でのベータ関数: βx = βy = 1m
- 両端でのベータ関数: βx = βy = 10m
- アルファ関数: αx = αy = 0（対称点）

### 課題
1. ローカルマッチングを使用してください
2. 制約条件を複数設定してください
3. マッチング結果を検証してください

---

## 解答例ファイル

各練習問題の解答例は以下のファイルで提供されています：
- `exercise1_solution.madx`
- `exercise2_solution.madx`
- `exercise3_solution.madx`
- `exercise4_solution.madx`
- `exercise5_solution.madx`

## 実行方法

```bash
# 練習問題の実行
madx < exercise1_solution.madx

# 出力ファイルの確認
cat twiss.out
gnuplot plot_script.gnu  # プロット確認
```
